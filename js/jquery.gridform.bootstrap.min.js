/** jquery.gridform.bootstrap v0.4 alpha | (c) Gunnar Thies, 2014 | MIT-License */
var gridform=gridform||{};gridform.ui=gridform.ui||{};(function($){console.log("UI bootstrap");var mastertype={labelAllowed:true,containsData:true,setLabel:function(data,cellSelectorLabel,parent){var html='<div class="form-group" style="display:inline;">';html+='   <label class="control-label">'+data.label;if(parent.settings.markMandatoryFields===true&&data.mandatory===true){html+=' *';}
html+='</label>';html+='</div>';return html;},render:function(data,cellSelector,parent){return'';},set:function(data,value,cellSelector,parent){},setPlaceholder:function(data,value,cellSelector,parent){return'';},get:function(data,cellSelector){},flush:function(cellSelector,parent){},enable:function(field,enable,cellSelector){},getFieldNode:function(field,cellSelector){},setStatus:function(field,type,cellSelectorLabel,cellSelectorContent,parent){if(type==="success"&&parent.settings.successIsGreen===false){}
else{$(cellSelectorLabel).find("div.form-group").addClass("has-"+type);$(cellSelectorContent).find("div.form-group").addClass("has-"+type);}
$(cellSelectorContent).find("div.form-group").data("status",type);if(field.hasFeedback===true){$(cellSelectorContent).find("span.form-control-feedback").addClass(parent.settings['icon_'+type]).show();}},setError:function(field,error,cellSelectorLabel,cellSelectorContent,parent){this.setStatus(field,'error',cellSelectorLabel,cellSelectorContent,parent);if(typeof $.fn.tooltip==="function"){$(cellSelectorContent).find("div.form-group").attr("data-toggle","tooltip").attr("data-placement",parent.settings.tooltipOrientation).attr("title",error);if(parent.settings.showTooltipInstantly===true){$(cellSelectorContent).find("div.form-group").tooltip("show");}else{$(cellSelectorContent).find("div.form-group").tooltip();}}},setSuccess:function(field,message,cellSelectorLabel,cellSelectorContent,parent){this.setStatus(field,'success',cellSelectorLabel,cellSelectorContent,parent);},setWarning:function(field,message,cellSelectorLabel,cellSelectorContent,parent){this.setStatus(field,'warning',cellSelectorLabel,cellSelectorContent,parent);if(typeof $.fn.tooltip==="function"){$(cellSelectorContent).find("div.form-group").attr("data-toggle","tooltip").attr("data-placement",parent.settings.tooltipOrientation).attr("title",message);if(parent.settings.showTooltipInstantly===true){$(cellSelectorContent).find("div.form-group").tooltip("show");}else{$(cellSelectorContent).find("div.form-group").tooltip();}}},setWaiting:function(field,message,cellSelectorLabel,cellSelectorContent,parent){this.setStatus(field,'waiting',cellSelectorLabel,cellSelectorContent,parent);parent.enable(false,field.id);},resetFieldMark:function(data,cellSelectorLabel,cellSelectorContent,parent){$(cellSelectorLabel).find("div.form-group").removeClass("has-error").removeClass("has-success").removeClass("has-warning");$(cellSelectorContent).find("div.form-group").removeClass("has-error").removeClass("has-success").removeClass("has-warning").data("status","");if(typeof $.fn.tooltip==="function"){$(cellSelectorContent).find("div.form-group").tooltip("destroy");}
if(data.hasFeedback===true){$(cellSelectorContent).find("span.form-control-feedback").removeClass(parent.settings.icon_success).removeClass(parent.settings.icon_error).removeClass(parent.settings.icon_warning).removeClass(parent.settings.icon_waiting);}}};gridform.types.string=$.extend({},mastertype,{render:function(data,cellSelector,parent){var disabled=(parent.settings.mode==="edit"&&data.readonly!==true)?'':'disabled';var hasFeedback=(data.hasFeedback===true)?'has-feedback':'';var width=(data.width!==undefined)?'width:'+data.width:'';var type=(data.pwd===true)?'password':'text';var placeholder=(data.placeholder!==undefined)?data.placeholder:'';var maxLength=(data.maxLength!==undefined)?'maxlength="'+parseInt(data.maxLength,10)+'"':'';var html='<div class="form-group '+hasFeedback+'" style="'+width+'">';html+='   <input type="'+type+'" '+disabled+' '+maxLength+' class="form-control" style="width:100%;" placeholder="'+placeholder+'"></input>';if(hasFeedback!==""){html+='   <span style="display:none;top:0;" class="'+parent.settings.icon_success+' form-control-feedback"></span>';}
html+='</div>';return html;},set:function(data,value,cellSelector,parent){if(parent.settings.mode==="edit"){$(cellSelector).find("input").val(value);}else{$(cellSelector).find("input").val(value);}},setPlaceholder:function(data,value,cellSelector,parent){$(cellSelector).find("input").attr("placeholder",value);},get:function(data,cellSelector){return $(cellSelector).find("input").val();},getFieldNode:function(field,cellSelector){return $(cellSelector).find("input");},flush:function(cellSelector,parent){$(cellSelector).find("input").val("");},enable:function(data,enable,cellSelector){if(data.readonly===true)
return false;if(enable===true){$(cellSelector).find("input").removeAttr("disabled");}else if(enable===false){$(cellSelector).find("input").attr("disabled","disabled");}}});gridform.types.text=$.extend({},mastertype,{render:function(data,cellSelector,parent){var disabled=(parent.settings.mode==="edit")?'':'disabled';var hasFeedback=(data.hasFeedback===true)?'has-feedback':'';var width=(data.width!==undefined)?'width:'+data.width:'';var placeholder=(data.placeholder!==undefined)?data.placeholder:'';var html='<div class="form-group '+hasFeedback+'" style="height:100%;'+width+'">';html+='   <textarea type="text" '+disabled+' class="form-control" style="width:100%;height:100%;resize: none;" placeholder="'+placeholder+'"></textarea>';if(hasFeedback!==""){html+='   <span style="display:none;top:0;" class="'+parent.settings.icon_success+' form-control-feedback"></span>';}
html+='</div>';return html;},set:function(data,value,cellSelector,parent){if(parent.settings.mode==="edit"){$(cellSelector).find("textarea").val(value);}else{$(cellSelector).find("textarea").val(value);}},setPlaceholder:function(data,value,cellSelector,parent){$(cellSelector).find("textarea").attr("placeholder",value);},get:function(data,cellSelector){return $(cellSelector).find("textarea").val();},getFieldNode:function(field,cellSelector){return $(cellSelector).find("textarea");},flush:function(cellSelector,parent){$(cellSelector).find("textarea").val("");},enable:function(data,enable,cellSelector){if(data.readonly===true)
return false;if(enable===true){$(cellSelector).find("textarea").removeAttr("disabled");}else if(enable===false){$(cellSelector).find("textarea").attr("disabled","disabled");}},afterDOMCreation:function(data,cellSelector,parent){setTimeout(function(){var height=$(cellSelector).height();$(cellSelector).find("div").height(height);},50);}});gridform.types.select=$.extend({},mastertype,{render:function(data,cellSelector,parent){var disabled=(parent.settings.mode==="edit")?'':'disabled';var hasFeedback=(data.hasFeedback===true)?'has-feedback':'';var width=(data.width!==undefined)?'width:'+data.width:'';var html='<div class="form-group '+hasFeedback+'" style="'+width+'">';html+='   <select '+disabled+' class="form-control" style="width:100%;"></select>';if(hasFeedback!==""){html+='   <span style="display:none;top:0;" class="'+parent.settings.icon_success+' form-control-feedback"></span>';}
html+='</div>';return html;},set:function(data,value,cellSelector,parent){if(parent.settings.mode==="edit"){$(cellSelector).find("select").val(value);}else{$(cellSelector).find("select").val(value);}},get:function(data,cellSelector){return $(cellSelector).find("select").val();},getFieldNode:function(field,cellSelector){return $(cellSelector).find("select");},flush:function(cellSelector,parent){$(cellSelector).find("select").val("");},enable:function(data,enable,cellSelector){if(data.readonly===true)
return false;if(enable===true){$(cellSelector).find("select").removeAttr("disabled");}else if(enable===false){$(cellSelector).find("select").attr("disabled","disabled");}},afterDOMCreation:function(data,cellSelector,parent){function fillDataInSelect(selection){var elem=$(cellSelector).find("select");elem.html("");if(data.withoutPlaceholder!==true){elem.append('<option value="">'+parent.settings.language.selectPlaceholder+'</option>');}
for(var x in selection){var selected=(data.selected==selection[x].key)?'selected':'';elem.append('<option '+selected+' value="'+selection[x].key+'">'+selection[x].value+'</option>');}
if($(cellSelector).find("div.form-group").data("status")==="waiting"){parent.resetFieldMarks(data.id);if(parent.settings.mode==="edit"){parent.enable(true,data.id);}}};if(data.selection===undefined)
return false;if(typeof data.selection==="function"){parent.setWaiting(data.id);var elem=$(cellSelector).find("select");elem.append('<option value="" selected>'+parent.settings.language.loading+'</option>');data.selection(fillDataInSelect);}else if(typeof(data.selection)==="object"){fillDataInSelect(data.selection);}}});gridform.types.radio=$.extend({},mastertype,{render:function(data,cellSelector,parent){var width=(data.width!==undefined)?'width:'+data.width:'';var disabled=(parent.settings.mode==="edit")?'':'disabled';var fontA=(parent.settings.useFontAwesome===true)?'fontA':'';var extraStyle=(data.inline===true)?'display:inline-block;padding-right:10px;':'';var html='<div class="form-group">';for(var x in data.selection){var uniqueId=parent.settings.name+'_'+data.id+'_'+x;html+='<div class="radio '+fontA+'" style="'+extraStyle+'">';html+='<input type="radio" class="'+fontA+'" id="'+uniqueId+'" '+disabled+' name="'+data.id+'_radios" value="'+data.selection[x].key+'">';html+='<label class="'+disabled+'" for="'+uniqueId+'">';html+=data.selection[x].value;html+='</label>';html+='</div>';}
html+='</div>';return html;},set:function(data,value,cellSelector,parent){$(cellSelector).find("input[value="+value+"]").prop("checked",true);},get:function(data,cellSelector){return $(cellSelector).find("input:checked").val();},getFieldNode:function(field,cellSelector){return $(cellSelector).find("select");},flush:function(cellSelector,parent){$(cellSelector).find("input").prop("checked",false);},enable:function(data,enable,cellSelector){if(data.readonly===true)
return false;if(enable===true){$(cellSelector).find("input").removeAttr("disabled");$(cellSelector).find("label").removeClass("disabled");}else if(enable===false){$(cellSelector).find("input").attr("disabled","disabled");$(cellSelector).find("label").addClass("disabled");}}});gridform.types.checkbox=$.extend({},mastertype,{render:function(data,cellSelector,parent){var width=(data.width!==undefined)?'width:'+data.width:'';var disabled=(parent.settings.mode==="edit")?'':'disabled';var fontA=(parent.settings.useFontAwesome===true)?'fontA':'';var extraStyle=(data.inline===true)?'display:inline-block;padding-right:10px;':'';var html='<div class="form-group">';for(var x in data.selection){var uniqueId=parent.settings.name+'_'+data.id+'_'+x;html+='<div class="checkbox '+fontA+'" style="'+extraStyle+'">';html+='<input type="checkbox" class="'+fontA+'" id="'+uniqueId+'" '+disabled+' name="'+data.selection[x].key+'" value="'+data.selection[x].key+'"> ';html+='<label class="'+disabled+'" for="'+uniqueId+'">';html+=data.selection[x].value;html+='</label>';html+='</div>';}
html+='</div>';return html;},set:function(data,value,cellSelector,parent){$(cellSelector).find("input").prop("checked",false);if(typeof value==="object"){for(var x in value){$(cellSelector).find("input[name="+value[x]+"]").prop("checked",true);}}else{$(cellSelector).find("input[name='"+value+"']").prop("checked",true);}},get:function(data,cellSelector){var boxes=$(cellSelector).find("input:checked");var data=[];for(var x=0;x<boxes.length;x++){data.push($(boxes[x]).val());}
return data;},getFieldNode:function(field,cellSelector){return $(cellSelector).find("select");},flush:function(cellSelector,parent){$(cellSelector).find("input").prop("checked",false);},enable:function(data,enable,cellSelector){if(data.readonly===true)
return false;if(enable===true){$(cellSelector).find("input").removeAttr("disabled");$(cellSelector).find("label").removeClass("disabled");}else if(enable===false){$(cellSelector).find("input").attr("disabled","disabled");$(cellSelector).find("label").addClass("disabled");}}});gridform.types.boolean=$.extend({},mastertype,{render:function(data,cellSelector,parent){var width=(data.width!==undefined)?'width:'+data.width:'';var disabled=(parent.settings.mode==="edit")?'':'disabled';var fontA=(parent.settings.useFontAwesome===true)?'fontA':'';var html='<div class="form-group">';var uniqueId=parent.settings.name+'_'+data.id;html+='<div class="checkbox '+fontA+'">';html+='<input type="checkbox" class="'+fontA+'" id="'+uniqueId+'" '+disabled+' name="" value="1"> <label for="'+uniqueId+'">&nbsp;</label>';html+='</div>';html+='</div>';return html;},set:function(data,value,cellSelector,parent){console.log(cellSelector);$(cellSelector).find("input").prop("checked",false);console.log(value);if(value===true){$(cellSelector).find("input").prop("checked",true);}else{$(cellSelector).find("input").prop("checked",false);}},get:function(data,cellSelector){var boxes=$(cellSelector).find("input:checked");if(boxes.length>0){return true;}else{return false;}},getFieldNode:function(field,cellSelector){return $(cellSelector).find("input");},flush:function(cellSelector,parent){$(cellSelector).find("input").prop("checked",false);},enable:function(data,enable,cellSelector){if(data.readonly===true)
return false;if(enable===true){$(cellSelector).find("input").removeAttr("disabled");}else if(enable===false){$(cellSelector).find("input").attr("disabled","disabled");}}});gridform.types.headline=$.extend({},mastertype,{labelAllowed:false,containsData:false,render:function(data,cellSelector,parent){var html='<div class="headline">'+data.label+'</div>';return html;}});gridform.types.separator=$.extend({},mastertype,{labelAllowed:false,containsData:false,render:function(data,cellSelector,parent){var html='<div class="separator"></div>';return html;}});gridform.addType=function(type,object){gridform.types[type]=$.extend({},mastertype,object);};}(jQuery));